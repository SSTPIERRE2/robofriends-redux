version: 2.1
orbs:
    node: circleci/node@4.0.0
jobs:
    build:
        docker:
            - image: circleci/node:8.9
        steps:
            - checkout
            - node/install-packages
            - run: npm install
            - run: npm tsc -p tsconfig.json
            - run: CI=true npm run build
    test:
        docker:
            - image: circleci/node:8.9
        steps:
            - checkout
            - node/install-packages
            - run: npm install
            - run: npm test
workflows:
    build_test_and_lint:
        jobs:
            - build
            - test
